<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REDWOOD - Precision Fit-Out Execution</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #B3262E;
            --color-bg-dark: #111827;
            --color-bg-darker: #0f172a;
            --color-text-light: #f3f4f6;
            --color-text-muted: #9ca3af;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--color-bg-dark);
            color: var(--color-text-light);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            height: 300px;
        }

        .nav-item.active {
            border-bottom: 2px solid var(--color-primary);
            color: #ffffff;
            font-weight: 600;
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-primary:hover {
            background-color: #8f1e25;
            transform: translateY(-2px);
        }

        .llm-output-card {
            white-space: pre-wrap;
            min-height: 100px;
            background-color: #1f2937;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #374151;
            font-size: 14px;
            line-height: 1.6;
        }

        strong {
            color: var(--color-primary);
            font-weight: 600;
        }

        ul li {
            margin-left: 16px;
            list-style: disc;
        }

        h4 {
            color: #ffffff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            border-bottom: 1px solid #374151;
            padding-bottom: 8px;
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200 antialiased">
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-gray-950/90 backdrop-blur-sm border-b border-gray-800 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center cursor-pointer" onclick="navigateTo('home')">
                    <svg width="200" height="50" viewBox="0 0 160 40" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0" y="8" width="4" height="24" fill="#B3262E"/>
                        <text x="14" y="28" font-family="Inter, sans-serif" font-size="20" font-weight="700" letter-spacing="1" fill="#f3f4f6">
                            <tspan fill="#f3f4f6">RED</tspan>
                            <tspan fill="#B3262E">WOOD</tspan>
                        </text>
                    </svg>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="navigateTo('home')" class="nav-item active px-1 pt-1 text-sm font-medium text-gray-400 hover:text-white transition-colors" data-target="home">Home</button>
                    <button onclick="navigateTo('services')" class="nav-item px-1 pt-1 text-sm font-medium text-gray-400 hover:text-white transition-colors" data-target="services">Services</button>
                    <button onclick="navigateTo('process')" class="nav-item px-1 pt-1 text-sm font-medium text-gray-400 hover:text-white transition-colors" data-target="process">Process</button>
                    <button onclick="navigateTo('projects')" class="nav-item px-1 pt-1 text-sm font-medium text-gray-400 hover:text-white transition-colors" data-target="projects">Projects</button>
                    <button onclick="navigateTo('clients')" class="nav-item px-1 pt-1 text-sm font-medium text-gray-400 hover:text-white transition-colors" data-target="clients">Clients</button>
                </div>
                <button onclick="navigateTo('contact')" class="bg-red-700 hover:bg-red-800 text-white px-5 py-2.5 text-sm font-semibold shadow-md transition-all rounded-md">Request Proposal</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen"></main>

    <!-- Chat Widget -->
    <div id="chat-widget" class="fixed bottom-4 right-4 z-50 flex flex-col items-end gap-2">
        <div id="welcome-message" class="bg-gray-800 text-gray-200 px-4 py-3 rounded-lg shadow-lg border border-gray-700 max-w-xs animate-bounce">
            <p class="text-sm font-medium">üëã Hello! How can we help with your fit-out project today?</p>
            <p class="text-xs text-gray-400 mt-1">Click the chat icon to open.</p>
        </div>

        <button id="chat-open" class="bg-red-700 hover:bg-red-800 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all">üí¨</button>

        <div id="chat-panel" class="hidden flex-col z-50 w-96 max-w-sm bg-gray-800 rounded-xl shadow-2xl border border-gray-700">
            <div class="bg-gradient-to-r from-red-700 to-red-800 text-white px-6 py-4 rounded-t-xl flex justify-between items-center">
                <div>
                    <h3 class="font-bold">REDWOOD Assistant</h3>
                    <p class="text-xs text-red-100">Usually replies instantly</p>
                </div>
                <button id="chat-close" class="text-white hover:text-red-200 text-lg">‚úï</button>
            </div>

            <div id="chat-messages" class="p-4 overflow-y-auto max-h-64 bg-gray-900 text-sm text-gray-200">
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-red-700 flex items-center justify-center text-white text-sm font-bold flex-shrink-0">R</div>
                    <div class="bg-gray-800 text-gray-200 px-4 py-2 rounded-lg border border-gray-700 text-sm">
                        <p>Hi! I'm the REDWOOD Assistant. Ask me about projects, services, timelines, or budgets.</p>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 px-4 py-4 rounded-b-xl border-t border-gray-700">
                <div class="flex gap-2">
                    <input id="chat-input" type="text" placeholder="Type your message..." class="flex-1 bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white">
                    <button id="chat-send" class="bg-red-700 hover:bg-red-800 text-white rounded-lg px-4 py-2 text-sm">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-950 text-gray-400 py-12 border-t-4 border-red-700 mt-12">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
            <div>
                <h3 class="text-white font-bold text-lg mb-4">REDWOOD</h3>
                <p>Engineers of execution. Bridging creative vision with construction reality across the UAE.</p>
            </div>
            <div>
                <h3 class="text-white font-bold text-lg mb-4">Contact</h3>
                <p>projects@redwoodfitout.ae</p>
                <p>+971 4 555 0123</p>
                <p>Dubai, Abu Dhabi, UAE</p>
            </div>
            <div>
                <h3 class="text-white font-bold text-lg mb-4">Certifications</h3>
                <p>ISO 9001 Quality Management</p>
                <p>Strict HSE Protocols</p>
                <p>UAE Civil Defence Compliant</p>
            </div>
        </div>
    </footer>

    <script>
        // App Data
        const appData = {
            metrics: { projects: 50, sqm: 10000, onTime: 98, years: 15 },
            services: [
                { id: 'corporate', title: 'Corporate Workplace', desc: 'Creating agile, modern, and high-performance corporate environments.', details: ['Partitions glazed and demountable systems', 'Specialized Flooring raised access, carpet tiling', 'Full MEP coordination and data integration', 'Acoustic treatments for meeting rooms', 'Custom Reception desks joinery'] },
                { id: 'retail', title: 'Retail, FB Hospitality', desc: 'High-impact, customer-facing spaces delivered with speed and precision.', details: ['Branded Millwork Display systems', 'Commercial Kitchen integration', 'Specialty Lighting Ambiance control', 'Durable Flooring micro-cement, vinyl', 'Authority approvals DED, Civil Defence'] },
                { id: 'residential', title: 'High-End Residential', desc: 'Bespoke execution for luxury villas and private apartments.', details: ['Custom Wardrobes Vanities', 'Marble, Granite Exotic Stone', 'Smart Home BMS integration', 'Swimming Pool coordination', 'Acoustic Thermal Insulation'] },
                { id: 'joinery', title: 'Specialist Joinery', desc: 'In-house fabrication for complex custom millwork and architectural features.', details: ['Custom Wall Paneling', 'Bespoke Furniture Manufacturing', 'Complex Ceiling Features', 'Material Matching Sourcing', 'CNC Precision Fabrication'] }
            ],
            process: [
                { step: 1, title: 'Discovery Brief', desc: 'Initial consultation, site visit, defining scope, goals, and base build constraints.', deliverables: 'Preliminary scope document, budget estimate, timeline outline.', risk: 'Ensures alignment of budget and expectations from day one.' },
                { step: 2, title: 'Design Coordination', desc: 'Collaborating with architects to finalize specs, review designs, and identify long-lead items.', deliverables: 'Material Schedule, Value Engineering, Preliminary Shop Drawings.', risk: 'Proactive identification of design clashes before procurement.' },
                { step: 3, title: 'Technical Planning', desc: 'Developing detailed shop drawings and submitting technical packages to UAE authorities.', deliverables: 'Final Shop Drawings, NOCs/Permits, Master Schedule Gantt.', risk: 'Guarantees compliance and secures the build timeline.' },
                { step: 4, title: 'Site Execution', desc: 'Mobilization, demolition, MEP rough-in, finishes, and fabrication installation.', deliverables: 'Weekly progress reports, QA checks, Safety logs.', risk: 'Strict HSE protocols and daily management minimize delays.' },
                { step: 5, title: 'Handover Aftercare', desc: 'Final inspections, snagging resolution, and official site handover.', deliverables: 'Completion Certificate, OM Manuals, Warranty Docs.', risk: 'Documented closure and future support assurance.' }
            ],
            projects: [
                { id: 1, name: 'Global Financial HQ', category: 'Corporate', location: 'Emaar Square, Dubai', size: '1,850 sqm', desc: 'Regional HQ communicating stability and modernity.', fullDesc: 'The client required a workspace aligning with European design standards. We handled complex MEP coordination within high-end Barrisol ceilings and recessed timber systems. Delivered 4 days ahead of schedule.', stats: ['20 Weeks Duration', 'Zero-Defect Handover', 'LEED Silver'], image: 'assets/Global.png' },
                { id: 2, name: 'Aurora Tech HQ', category: 'Corporate', location: 'Dubai Media City', size: '2,100 sqm', desc: 'High-tech workspace with acoustic paneling.', fullDesc: 'A fast-paced fit-out requiring sophisticated AV integration. Key challenge was acoustic isolation between open-plan zones and boardrooms. Delivered on schedule with zero rework.', stats: ['16 Weeks Duration', 'Custom Acoustics', 'Open Plan'], image: 'assets/Aurora.png' },
                { id: 3, name: 'The Signature Grill', category: 'Retail', location: 'Yas Mall, Abu Dhabi', size: '400 sqm', desc: 'Luxury dining with signature marble bar.', fullDesc: 'Complex execution of a curved marble bar and custom veneer wall panels under tight mall-specific timelines.', stats: ['12 Weeks Duration', 'Night Shift Execution', 'Marble Features'], image: 'assets/the gril.png' },
                { id: 4, name: 'Al Barari Private Villa', category: 'Residential', location: 'Al Barari, Dubai', size: '1,100 sqm', desc: 'Complete internal refurbishment.', fullDesc: 'Focused on Italian stone installation, precision metalwork features, and a complete smart-home retrofit.', stats: ['24 Weeks Duration', 'Stone Cladding', 'Smart Home'], image: 'assets/private villa.png' },
                { id: 5, name: 'DIFC Law Firm', category: 'Corporate', location: 'DIFC, Dubai', size: '850 sqm', desc: 'Secure, high-spec legal practice offices.', fullDesc: 'Delivering sound-proof meeting rooms and bespoke timber ceilings. High security protocols required during construction.', stats: ['14 Weeks Duration', 'High Security', 'Bespoke Timber'], image: 'assets/DIFC law.png' },
                { id: 6, name: 'Jumeirah Lobby', category: 'Hospitality', location: 'Jumeirah, Dubai', size: '600 sqm', desc: 'High-traffic public space refurbishment.', fullDesc: 'Fast-track execution involving complex flooring patterns and custom lighting features, done while hotel remained operational.', stats: ['8 Weeks Duration', 'Live Environment', 'Complex Tiling'], image: 'assets/loppy.png' }
            ]
        };

        // Render Home
        function renderHome() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="fade-in space-y-16">
                    <section class="relative rounded-2xl overflow-hidden shadow-2xl text-white" style="background-image: url('assets/loppy.png'); background-size: cover; background-position: center;">
                        <div class="absolute inset-0 bg-gradient-to-r from-gray-950/90 via-gray-950/75 to-gray-950/60"></div>
                        <div class="relative z-10 px-8 py-20 md:py-32 md:px-12">
                            <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-6 leading-tight">Precision Fit-Out Execution.<br><span class="text-red-700">Designed to the Detail.</span></h1>
                            <p class="text-lg md:text-xl text-gray-400 max-w-2xl mb-10 font-light">We are REDWOOD, a specialist interior fit-out contractor delivering complex, high-specification corporate, hospitality, and retail environments across the UAE and wider GCC.</p>
                            <div class="flex flex-wrap gap-4">
                                <button onclick="navigateTo('contact')" class="btn-primary">Request a Proposal</button>
                                <button onclick="navigateTo('projects')" class="bg-transparent border border-gray-600 hover:bg-gray-800 text-gray-200 px-8 py-4 rounded-md font-semibold text-lg transition-colors">View Projects</button>
                            </div>
                        </div>
                    </section>

                    <section class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div class="space-y-6">
                            <h2 class="text-3xl font-bold text-white border-l-4 border-red-700 pl-4">The Strength of Execution</h2>
                            <p class="text-gray-400 leading-relaxed text-lg">REDWOOD is built on partnership. We partner with architects, designers, and consultants to translate complex concepts into precise, built realities.</p>
                            <ul class="grid grid-cols-2 gap-4 mt-6">
                                <li class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
                                    <span class="block text-3xl font-bold text-red-700">${appData.metrics.projects}</span>
                                    <span class="text-sm text-gray-400 font-medium">Complex Projects</span>
                                </li>
                                <li class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
                                    <span class="block text-3xl font-bold text-red-700">${appData.metrics.sqm / 1000}k</span>
                                    <span class="text-sm text-gray-400 font-medium">Sqm Fitted Out</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-700">
                            <h3 class="text-lg font-semibold mb-2 text-white text-center">Execution Reliability</h3>
                            <p class="text-sm text-gray-400 text-center mb-6">Our commitment to timelines is absolute.</p>
                            <div class="chart-container">
                                <canvas id="reliabilityChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <section>
                        <div class="flex justify-between items-end mb-8">
                            <div>
                                <h2 class="text-2xl font-bold text-white">Sectors We Execute</h2>
                                <p class="text-gray-400">Specialized teams for specialized spaces.</p>
                            </div>
                            <button onclick="navigateTo('services')" class="text-red-700 font-medium hover:underline">View All Services ‚Üí</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            ${appData.services.map(service => `
                                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700 hover:shadow-xl transition-shadow cursor-pointer group" onclick="navigateTo('services')">
                                    <div class="text-4xl mb-4 group-hover:scale-110 transition-transform duration-300">üè¢</div>
                                    <h3 class="font-bold text-white mb-2">${service.title}</h3>
                                    <p class="text-sm text-gray-400 line-clamp-3">${service.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </section>
                </div>
            `;
            setTimeout(initReliabilityChart, 100);
        }

        // Render Services
        function renderServices() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="fade-in">
                    <div class="mb-10 text-center max-w-3xl mx-auto">
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">Specialist Fit-Out Services</h1>
                        <p class="text-lg text-gray-400">Our services move beyond basic installation. REDWOOD offers turnkey support, managing every technical component.</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <div class="lg:col-span-4 space-y-2">
                            ${appData.services.map((service, index) => `
                                <button onclick="switchServiceTab(${index})" id="service-btn-${index}" class="w-full text-left px-6 py-4 rounded-lg transition-all duration-200 flex items-center justify-between ${index === 0 ? 'bg-gray-700 text-white shadow-lg' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'}">
                                    <span class="font-semibold">${service.title}</span>
                                    <span class="opacity-50 group-hover:opacity-100">‚Üí</span>
                                </button>
                            `).join('')}
                        </div>

                        <div class="lg:col-span-8">
                            ${appData.services.map((service, index) => `
                                <div id="service-content-${index}" class="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 ${index !== 0 ? 'hidden' : 'fade-in'}">
                                    <h2 class="text-2xl font-bold text-white mb-2">${service.title}</h2>
                                    <p class="text-red-700 font-medium">Turnkey Execution Support</p>
                                    <p class="text-lg text-gray-300 mb-8 leading-relaxed mt-4">${service.desc}</p>
                                    <h3 class="font-bold text-white mb-4 border-b border-gray-700 pb-2">Typical Scope of Work</h3>
                                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        ${service.details.map(item => `<li class="flex items-start text-gray-300"><span class="text-red-700 mr-2">‚úì</span> ${item}</li>`).join('')}
                                    </ul>
                                    <div class="mt-8 pt-6 border-t border-gray-700 flex justify-end">
                                        <button onclick="navigateTo('contact')" class="text-sm font-bold text-white hover:text-red-700 transition-colors">Discuss this service ‚Üí</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function switchServiceTab(index) {
            appData.services.forEach((_, i) => {
                const btn = document.getElementById(`service-btn-${i}`);
                const content = document.getElementById(`service-content-${i}`);
                if (i === index) {
                    btn.className = 'w-full text-left px-6 py-4 rounded-lg transition-all duration-200 flex items-center justify-between bg-gray-700 text-white shadow-lg';
                    content.classList.remove('hidden');
                } else {
                    btn.className = 'w-full text-left px-6 py-4 rounded-lg transition-all duration-200 flex items-center justify-between bg-gray-800 text-gray-300 hover:bg-gray-700';
                    content.classList.add('hidden');
                }
            });
        }

        // Render Process
        function renderProcess() {
            const container = document.getElementById('app-content');
            let html = `
                <div class="fade-in max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">Built on Process. Delivered with Certainty.</h1>
                        <p class="text-lg text-gray-400 max-w-2xl mx-auto">Our systematic 5-step process ensures transparency and strict timeline adherence.</p>
                    </div>

                    <div class="grid grid-cols-5 gap-2 mb-12">
                        ${appData.process.map((p, i) => `
                            <div onclick="setProcessStep(${i})" class="cursor-pointer flex flex-col items-center">
                                <div id="step-bubble-${i}" class="w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center font-bold text-lg md:text-xl transition-all duration-300 border-4 border-gray-900 shadow-md ${i === 0 ? 'bg-red-700 text-white scale-110' : 'bg-gray-700 text-gray-400 hover:bg-gray-600'}">
                                    ${i + 1}
                                </div>
                                <span id="step-label-${i}" class="mt-2 text-xs md:text-sm font-semibold text-center ${i === 0 ? 'text-red-700' : 'text-gray-400'}">${p.title}</span>
                            </div>
                        `).join('')}
                    </div>

                    <div id="process-detail-card" class="bg-gray-800 p-8 md:p-12 rounded-2xl shadow-xl border-t-4 border-red-700 min-h-300px">
                        <!-- Injected -->
                    </div>
                </div>
            `;
            container.innerHTML = html;
            setProcessStep(0);
        }

        function setProcessStep(index) {
            const step = appData.process[index];
            const detailCard = document.getElementById('process-detail-card');

            appData.process.forEach((_, i) => {
                const bubble = document.getElementById(`step-bubble-${i}`);
                const label = document.getElementById(`step-label-${i}`);
                if (i === index) {
                    bubble.className = `w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center font-bold text-lg md:text-xl transition-all duration-300 border-4 border-gray-900 shadow-md bg-red-700 text-white scale-110`;
                    label.className = 'mt-2 text-xs md:text-sm font-semibold text-center text-red-700';
                } else {
                    bubble.className = `w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center font-bold text-lg md:text-xl transition-all duration-300 border-4 border-gray-900 shadow-md bg-gray-700 text-gray-400 hover:bg-gray-600`;
                    label.className = 'mt-2 text-xs md:text-sm font-semibold text-center text-gray-400';
                }
            });

            detailCard.innerHTML = `
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="flex-1">
                        <span class="text-sm font-bold text-gray-500 uppercase tracking-widest block mb-2">Step ${index + 1}</span>
                        <h2 class="text-3xl font-bold text-white mb-4">${step.title}</h2>
                        <p class="text-lg text-gray-300 mb-6">${step.desc}</p>
                    </div>
                    <div class="flex-1 bg-gray-900 p-6 rounded-lg border border-gray-700">
                        <div class="mb-4">
                            <h4 class="font-bold text-white mb-1">Key Deliverables</h4>
                            <p class="text-sm text-gray-400">${step.deliverables}</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-white mb-1">Risk Mitigation</h4>
                            <p class="text-sm text-red-700 font-medium italic">${step.risk}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render Projects
        function renderProjects() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="fade-in">
                    <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-gray-800 pb-6">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Selected Portfolio</h1>
                            <p class="text-gray-400">Detail Executed. Execution quality across diverse sectors.</p>
                        </div>
                        <div class="mt-4 md:mt-0 flex gap-2 overflow-x-auto pb-2">
                            <button onclick="filterProjects('All')" id="filter-All" class="filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-colors bg-white text-gray-900">All Work</button>
                            <button onclick="filterProjects('Corporate')" id="filter-Corporate" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-gray-700 text-gray-300 hover:bg-gray-600">Corporate</button>
                            <button onclick="filterProjects('Retail')" id="filter-Retail" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-gray-700 text-gray-300 hover:bg-gray-600">Retail</button>
                            <button onclick="filterProjects('Residential')" id="filter-Residential" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-gray-700 text-gray-300 hover:bg-gray-600">Residential</button>
                        </div>
                    </div>

                    <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>

                    <div id="project-modal" class="fixed inset-0 z-100 bg-gray-950/90 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity" onclick="if(event.target.id === 'project-modal') closeModal()">
                        <div class="bg-gray-800 w-full max-w-4xl max-h-90vh overflow-y-auto rounded-xl shadow-2xl relative" onclick="event.stopPropagation()">
                            <button onclick="closeModal()" class="absolute top-4 right-4 bg-gray-900 rounded-full p-2 text-gray-200 hover:text-red-700 font-bold shadow-md z-10">‚úï</button>
                            <div id="modal-content"></div>
                        </div>
                    </div>
                </div>
            `;
            filterProjects('All');
        }

        function filterProjects(category) {
            const grid = document.getElementById('projects-grid');
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.id === `filter-${category}`) {
                    btn.className = 'filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-colors bg-red-700 text-white';
                } else {
                    btn.className = 'filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-gray-700 text-gray-300 hover:bg-gray-600';
                }
            });

            const filtered = category === 'All' ? appData.projects : appData.projects.filter(p => p.category.includes(category));

            grid.innerHTML = filtered.map(p => `
                <div class="bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border border-gray-700 group cursor-pointer" onclick="openProjectModal(${p.id})">
                    <div class="h-48 relative overflow-hidden">
                        <img src="${p.image || 'https://via.placeholder.com/1200x720?text=No+Image'}" alt="${p.name}" class="absolute inset-0 w-full h-full object-cover transition-transform group-hover:scale-105">
                        <div class="absolute inset-0 bg-gray-600 group-hover:bg-gray-700 transition-colors opacity-30"></div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-white group-hover:text-red-700 transition-colors">${p.name}</h3>
                        </div>
                        <p class="text-sm text-gray-400 mb-4">${p.location} ‚Ä¢ ${p.size}</p>
                        <p class="text-gray-300 text-sm line-clamp-3 mb-4">${p.desc}</p>
                        <div class="text-red-700 text-sm font-semibold flex items-center">View Case Study <span class="ml-1 group-hover:translate-x-1 transition-transform">‚Üí</span></div>
                    </div>
                </div>
            `).join('');
        }

        function openProjectModal(id) {
            const p = appData.projects.find(proj => proj.id === id);
            const modal = document.getElementById('project-modal');
            const content = document.getElementById('modal-content');

            content.innerHTML = `
                <div class="flex flex-col md:flex-row">
                    <div class="bg-gray-900 text-white p-8 md:w-1/3">
                        <span class="text-red-700 font-bold tracking-widest text-xs uppercase block mb-2">Case Study</span>
                        <h2 class="text-3xl font-bold mb-4">${p.name}</h2>
                        <div class="space-y-4 text-sm text-gray-300 mb-8">
                            <div class="border-b border-gray-700 pb-2">
                                <span class="block text-gray-500 text-xs">Sector</span>
                                <p>${p.category}</p>
                            </div>
                            <div class="border-b border-gray-700 pb-2">
                                <span class="block text-gray-500 text-xs">Location</span>
                                <p>${p.location}</p>
                            </div>
                            <div class="border-b border-gray-700 pb-2">
                                <span class="block text-gray-500 text-xs">Size</span>
                                <p>${p.size}</p>
                            </div>
                        </div>
                        <div class="bg-gray-800 p-4 rounded border-l-4 border-red-700">
                            <h4 class="font-bold text-white mb-2">Key Outcomes</h4>
                            <ul class="space-y-1">
                                ${p.stats.map(s => `<li class="text-xs text-gray-300">‚úì ${s}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="p-8 md:w-2/3 bg-gray-800">
                        <h3 class="text-xl font-bold text-white mb-4">Challenge</h3>
                        <p class="text-gray-300 mb-6 leading-relaxed">${p.desc}</p>
                        <p class="text-gray-300 mb-6 leading-relaxed">${p.fullDesc}</p>
                        <h3 class="text-xl font-bold text-white mb-4">Precision Handover</h3>
                        <p class="text-gray-300 leading-relaxed">The project was completed and handed over on time, passing all final authority inspections due to rigorous technical planning.</p>
                        <div class="mt-8 pt-6 border-t border-gray-700">
                            <button onclick="closeModal(); navigateTo('contact')" class="bg-red-700 hover:bg-red-800 text-white px-6 py-3 rounded text-sm font-bold shadow-md w-full md:w-auto">Start Your Proposal</button>
                        </div>
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('project-modal').classList.add('hidden');
        }

        // Render Clients
        function renderClients() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="fade-in max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <h1 class="text-3xl font-bold text-white">Trusted by the Best</h1>
                        <p class="text-gray-400 mt-2">Our success is measured by repeat business and exacting standards.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-16">
                        <div class="bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-700 relative">
                            <div class="text-red-700 text-6xl absolute top-4 left-4 opacity-20">"</div>
                            <p class="text-gray-300 italic relative z-10 mb-4">The REDWOOD team demonstrated exceptional technical skill, particularly with custom millwork. The precision was flawless.</p>
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center font-bold text-gray-400 text-xs">AR</div>
                                <div class="ml-3">
                                    <p class="text-sm font-bold text-white">Lead Architect</p>
                                    <p class="text-xs text-gray-500">Major Design Studio, Dubai</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-700 relative">
                            <div class="text-red-700 text-6xl absolute top-4 left-4 opacity-20">"</div>
                            <p class="text-gray-300 italic relative z-10 mb-4">They delivered on a non-negotiable schedule. Proactive communication kept technical risks low from start to finish.</p>
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center font-bold text-gray-400 text-xs">TC</div>
                                <div class="ml-3">
                                    <p class="text-sm font-bold text-white">Head of Operations</p>
                                    <p class="text-xs text-gray-500">International Tech Company</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-950 text-white rounded-2xl p-8 md:p-12 flex flex-col md:flex-row items-center justify-between">
                        <div class="mb-6 md:mb-0">
                            <h3 class="text-2xl font-bold mb-2">Quality Compliance</h3>
                            <p class="text-gray-400 max-w-md">Fully compliant with UAE Civil Defence Municipality regulations. ISO 9001 certified.</p>
                        </div>
                        <div class="flex gap-4">
                            <div class="border border-gray-700 p-4 rounded text-center">
                                <span class="block font-bold text-red-700">ISO</span>
                                <span class="text-xs text-gray-300">9001</span>
                            </div>
                            <div class="border border-gray-700 p-4 rounded text-center">
                                <span class="block font-bold text-red-700">HSE</span>
                                <span class="text-xs text-gray-300">Strict Protocols</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render Contact
        function renderContact() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="fade-in grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div>
                        <h1 class="text-3xl font-bold text-white mb-4">Request a Proposal</h1>
                        <p class="text-gray-400 mb-8 text-lg">Share your project brief details. Expect a personal confirmation from a Senior Project Manager within 1 business day.</p>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="bg-gray-800 p-3 rounded-full mr-4 text-red-700">üìû</div>
                                <div>
                                    <h4 class="font-bold text-white">Direct Line</h4>
                                    <p class="text-gray-400">+971 4 555 0123</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-gray-800 p-3 rounded-full mr-4 text-red-700">üí¨</div>
                                <div>
                                    <h4 class="font-bold text-white">WhatsApp</h4>
                                    <p class="text-gray-400">+971 50 555 0123</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-gray-800 p-3 rounded-full mr-4 text-red-700">‚úâÔ∏è</div>
                                <div>
                                    <h4 class="font-bold text-white">Email</h4>
                                    <p class="text-gray-400">projects@redwoodfitout.ae</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-800 p-8 rounded-xl shadow-xl border-t-4 border-red-700 space-y-6">
                        <form id="proposal-form" onsubmit="event.preventDefault()">
                            <h3 class="text-xl font-bold text-white mb-4">Project Details</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Your Name</label>
                                    <input type="text" id="input-name" required class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 focus:ring-1 focus:ring-red-700 outline-none text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Company Name</label>
                                    <input type="text" id="input-company" required class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 focus:ring-1 focus:ring-red-700 outline-none text-white">
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                                    <input type="email" id="input-email" required class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Phone</label>
                                    <input type="tel" id="input-phone" required class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white">
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Location</label>
                                    <select id="input-location" class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white">
                                        <option>Dubai</option>
                                        <option>Abu Dhabi</option>
                                        <option>KSA</option>
                                        <option>Other GCC</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Space Type</label>
                                    <select id="input-type" required class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white">
                                        <option value="">Select</option>
                                        <option>Corporate Office</option>
                                        <option>Retail</option>
                                        <option>Hospitality</option>
                                        <option>Residential</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mt-4">
                                <label class="block text-sm font-medium text-gray-300 mb-1">Size (sqm)</label>
                                <input type="number" id="input-size" required placeholder="e.g. 500" class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white">
                            </div>

                            <div class="mt-4">
                                <label class="block text-sm font-medium text-gray-300 mb-1">Brief Description</label>
                                <textarea rows="3" id="input-description" required placeholder="Scope, complexity, primary goals..." class="w-full bg-gray-900 border border-gray-700 rounded p-2 focus:border-red-700 outline-none text-white"></textarea>
                            </div>

                            <button type="submit" onclick="document.getElementById('llm-output').innerHTML = '<p class=\"text-green-400 text-center py-4\">Thank you! A REDWOOD Project Manager will contact you shortly.</p>'" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-3 rounded shadow-md transition-colors mt-6">Submit Proposal</button>
                        </form>

                        <div id="llm-output" class="mt-6 text-sm text-gray-400">
                            <p class="text-center italic">Fill out the form and submit to send your inquiry.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Chart Initialization
        function initReliabilityChart() {
            const ctx = document.getElementById('reliabilityChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['On-Time', 'Minor Delays', 'Significant Delays'],
                    datasets: [{
                        data: [98, 2, 0],
                        backgroundColor: ['#B3262E', '#4b5563', '#1f2937'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                color: '#e5e7eb',
                                font: { family: 'Inter', size: 12 }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            },
                            backgroundColor: '#B3262E',
                            padding: 12
                        }
                    }
                }
            });
        }

        // Navigation
        function navigateTo(targetId) {
            document.querySelectorAll('.nav-item').forEach(el => {
                if (el.getAttribute('data-target') === targetId) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active');
                }
            });

            window.scrollTo(0, 0);

            switch (targetId) {
                case 'home': renderHome(); break;
                case 'services': renderServices(); break;
                case 'process': renderProcess(); break;
                case 'projects': renderProjects(); break;
                case 'clients': renderClients(); break;
                case 'contact': renderContact(); break;
                default: renderHome();
            }
        }

        // Chat Widget Functions
        function initChatWidget() {
            const chatClose = document.getElementById('chat-close');
            const chatSend = document.getElementById('chat-send');
            const chatInput = document.getElementById('chat-input');
            const chatOpen = document.getElementById('chat-open');

            if (chatClose) chatClose.addEventListener('click', closeChatWidget);
            if (chatSend) chatSend.addEventListener('click', sendChatMessage);
            if (chatInput) chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChatMessage();
            });
            if (chatOpen) chatOpen.addEventListener('click', openChatWidget);
        }

        function openChatWidget() {
            const panel = document.getElementById('chat-panel');
            const welcome = document.getElementById('welcome-message');
            if (panel) {
                panel.classList.remove('hidden');
                panel.classList.add('flex');
            }
            if (welcome) welcome.classList.add('hidden');
            setTimeout(() => {
                const input = document.getElementById('chat-input');
                if (input) input.focus();
            }, 50);
        }

        function closeChatWidget() {
            const panel = document.getElementById('chat-panel');
            const welcome = document.getElementById('welcome-message');
            if (panel) {
                panel.classList.add('hidden');
                panel.classList.remove('flex');
            }
            if (welcome) welcome.classList.remove('hidden');
        }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const messagesArea = document.getElementById('chat-messages');
            const message = input.value.trim();

            if (!message) return;

            // User message
            const userMsg = document.createElement('div');
            userMsg.className = 'flex gap-3 justify-end';
            userMsg.innerHTML = `
                <div class="bg-red-700 text-white px-4 py-2 rounded-lg text-sm max-w-xs">
                    <p>${escapeHtml(message)}</p>
                </div>
            `;
            messagesArea.appendChild(userMsg);
            input.value = '';

            // Simulate bot response
            setTimeout(() => {
                const botResponse = generateBotResponse(message);
                const botMsg = document.createElement('div');
                botMsg.className = 'flex items-start';
                botMsg.innerHTML = `
                    <div class="bg-gray-700 p-3 rounded-lg">
                        <p class="text-sm">${botResponse}</p>
                    </div>
                `;
                messagesArea.appendChild(botMsg);
                messagesArea.scrollTop = messagesArea.scrollHeight;
            }, 600);

            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function generateBotResponse(userMessage) {
            const msg = userMessage.toLowerCase();
            
            if (msg.includes('project') || msg.includes('proposal')) {
                return 'Great! To discuss your fit-out project, please use our proposal form or contact us at +971 4 555 0123. A project manager will respond within 1 business day.';
            } else if (msg.includes('service') || msg.includes('work')) {
                return 'We specialize in Corporate Workplace, Retail/Hospitality, High-End Residential, and Specialist Joinery. Which area interests you most?';
            } else if (msg.includes('price') || msg.includes('cost') || msg.includes('budget')) {
                return 'Pricing varies based on project scope and complexity. Let\'s discuss your specific needs. Contact: projects@redwoodfitout.ae';
            } else if (msg.includes('timeline') || msg.includes('duration') || msg.includes('how long')) {
                return 'Our projects typically range from 8 to 24 weeks, depending on scope. Our 5-step process ensures on-time delivery with 98% success rate.';
            } else if (msg.includes('contact') || msg.includes('phone') || msg.includes('email')) {
                return 'You can reach us at: üìû +971 4 555 0123 | üí¨ +971 50 555 0123 | ‚úâÔ∏è projects@redwoodfitout.ae';
            } else if (msg.includes('location') || msg.includes('where')) {
                return 'We operate across Dubai, Abu Dhabi, KSA, and the wider GCC region. Where is your project located?';
            } else if (msg.includes('portfolio') || msg.includes('project') || msg.includes('case')) {
                return 'Check out our portfolio section to see 6 completed projects across Corporate, Retail, Hospitality, and Residential sectors.';
            } else {
                return 'Thanks for your message! For detailed inquiries, please visit our Contact page or reach out directly. How else can I assist you?';
            }
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            navigateTo('home');
            initChatWidget();
        });
    </script>

        <!-- Chat Widget Configuration (provided) -->
        <script>
            // Chat Widget Configuration ‚Äî replace or extend as needed
            window.ChatWidgetConfig = {
                webhook: {
                    url: 'https://sanest-myesha-prosaic.ngrok-free.dev/webhook/73185803-6996-4c19-b766-fe02622e17b2/chat',
                },
                branding: {
                    logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png'
                }
            };

            // If an external widget script exposes an initializer `InitChatFromConfig`, call it and hide the local fallback
            (function waitForExternalInit(retries = 40) {
                if (window.InitChatFromConfig && typeof window.InitChatFromConfig === 'function') {
                    try {
                        window.InitChatFromConfig(window.ChatWidgetConfig);
                        // hide local fallback widget to avoid duplication
                        const fallback = document.getElementById('chat-widget');
                        if (fallback) fallback.style.display = 'none';
                    } catch (e) {
                        console.warn('External chat init failed:', e);
                    }
                    return;
                }

                if (retries <= 0) return;
                setTimeout(() => waitForExternalInit(retries - 1), 150);
            })();
        </script>
</body>
</html>
